<!doctype html>

<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>心の星｜Multebaer</title>
  <link rel="stylesheet" href="../dreams/css/style.css" />
	<link href="https://fonts.googleapis.com/css2?family=Baloo+2&display=swap" rel="stylesheet">

</head>
<body class="iframe-body main-page novel-body">
	<div class="background-overlay"></div>
  <!-- 首頁內容 -->
	 <!-- ✅ Navbar 動態載入 -->
  <div id="navbar-container"></div>
	<main class="about-section">
		<div id="password-gate">
			<div class="gate-box">
      <h2>這是混邪私人專區</h2>
      <p class="password">請輸入密碼以瀏覽內容：</p>
      <input type="password" id="page-password" placeholder="請輸入密碼">
      <button id="gate-btn">進入</button>
      <p id="error-msg" style="color:red; display:none;">密碼錯誤</p>
			</div>
    </div>

    <div id="secret-content" style="display:none;">   
    <div class="about-box">
		<h2>NSFW</h2>
		<p style="margin-top:-1.5em;font-size:14px">重口味群Ｐ大雜燴。</p>
		<div class="table-wrapper">
  <table class="custom-table" style="
		color: #6E6E6E">
    <tr>
      <th>Name</th>
      <th>Item</th>
		<th>Author</th>
		<th>TAG</th>
    </tr>    
	  <tr>
      <td><span class="article-link" onclick="loadArticle('NSFW/ShinraMB-01.html')">神羅軍妓 01</span></td>
      <td>文字委託</td>
		<td>一團雲</td>
		<td>ＡＧＺ｜雙穴｜咬</td>
    </tr>
	  <tr>
      <td><span class="article-link" onclick="loadArticle('NSFW/ShinraMB-02.html')">神羅軍妓 02</span></td>
      <td>文字委託</td>
		<td>一團雲</td>
		<td>Ｓ｜咬</td>
    </tr>
	  <tr>
      <td><span class="article-link" onclick="loadArticle('NSFW/ShinraMB-03.html')">神羅軍妓 03</span></td>
      <td>文字委託</td>
		<td>一團雲</td>
		<td>Ｇ｜發燒｜雙穴</td>
    </tr>
	  <tr>
      <td><span class="article-link" onclick="loadArticle('NSFW/ShinraMB-04.html')">神羅軍妓 04</span></td>
      <td>文字委託</td>
		<td>一團雲</td>
		<td>Ｃ｜清水｜養崽（崽養我）</td>
    </tr>	  
    <tr>
      <td><span class="article-link" onclick="loadArticle('NSFW/Psalm.html')">詩</span></td>
      <td>其他&nbsp;</td>
		<td>寶寶&nbsp;</td>
		<td>Ｇ｜咬</td>
    </tr>
	  <tr>
      <td><span class="article-link" onclick="loadArticle('NSFW/PsalmAfterword.html')">詩 - 續篇</span></td>
      <td>其他</td>
		<td>寶寶</td>
		<td>Ｇ｜尿道Ｐｌａｙ｜聖水｜把尿</td>
    </tr>
	   <tr>
      <td><span class="article-link" onclick="loadArticle('NSFW/Sentinel&Guide-01.html')">哨嚮（上）</span></td>
      <td>文字委託</td>
		<td>一團雲</td>
		<td>３Ｐ（S+C）｜指導式性愛</td>
    </tr>
	   <tr>
      <td><span class="article-link" onclick="loadArticle('NSFW/Sentinel&Guide-02.html')">哨嚮（下）</span></td>
      <td>文字委託</td>
		<td>一團雲</td>
		<td>Ｃ｜女方主動｜騎乘</td>
    </tr>
	  <tr>
      <td><span class="article-link" onclick="loadArticle('NSFW/Captivity.html')">囚</span></td>
      <td>文字委託</td>
		<td>一團雲</td>
		<td>３Ｐ（S+C）｜雙穴</td>
    </tr>
	  <tr>
      <td><span class="article-link" onclick="loadArticle('NSFW/Possesed.html')">鬼上身</span></td>
      <td>文字委託</td>
		<td>一團雲</td>
		<td>ＮＴＲ</td>
    </tr>
	  <tr>
      <td><span class="article-link" onclick="loadArticle('NSFW/Nest.html')">巢</span></td>
      <td>文字委託</td>
		<td>ALiar</td>
		<td>３Ｐ（Ｓ+Ｃ）｜雙穴</td>
    </tr>
	  <tr>
      <td><span class="article-link" onclick="loadArticle('NSFW/LoveTroubles.html')">戀愛的煩惱 01</span></td>
      <td>文字委託</td>
		<td>一團雲</td>
		<td>Ｃ｜ＣＳ♀曖昧前提(過去式)</td>
    </tr>
	  <tr>
      <td><span class="article-link" onclick="loadArticle('NSFW/Rose.html')">戀愛的煩惱  02</span></td>
      <td>文字委託</td>
		<td>一團雲</td>
		<td>Ｓ｜ＣＳ♀曖昧前提(過去式)</td>
    </tr>
	  <tr>
      <td><span class="article-link" onclick="loadArticle('NSFW/TorrentofSpring.html')">春潮</span></td>
      <td>文字委託</td>
		<td>ALiar</td>
		<td>Ｓ｜道具｜雙穴｜感冒ｐｌａｙ</td>
    </tr>
  </table>
			</div>

  <div id="overlay" class="overlay" onclick="closePreview()"></div>

  <div id="preview" class="preview-panel">
	  <div class="preview-wrapper">
  <div class="top-buttons">
	  
    <div class="close-btn" onclick="closePreview()">≫</div>
    <div class="fullscreen-btn" onclick="toggleFullscreen()">⛶</div>
  <div class="open-new-btn" onclick="openInNewTab()">⤢</div>
  </div>
  <div id="preview-content"></div>
</div></div>
		</div></div>
		</main>
	
	<!--放大動畫+側邊彈出動畫-->
		<script>
			function toggleFullscreen() {
  const panel = document.getElementById('preview');
  const fullscreen = panel.classList.toggle('fullscreen');
  document.body.style.overflow = fullscreen ? 'hidden' : '';
}

function closePreview() {
  const panel = document.getElementById('preview');
  panel.classList.remove('active');
  panel.classList.remove('fullscreen');
  document.getElementById('overlay').classList.remove('active');
  document.body.style.overflow = '';
}
		let currentArticleFile = null;

function loadArticle(filename) {
  currentArticleFile = filename;

  fetch(filename)
    .then(res => res.text())
    .then(html => {
      const panel = document.getElementById('preview');
      const content = document.getElementById('preview-content');
      const overlay = document.getElementById('overlay');

      if (!panel || !content || !overlay) {
        console.error("找不到 preview 或 overlay 結構！");
        return;
      }

      content.innerHTML = html;
      panel.classList.add('active');
      overlay.classList.add('active');
      document.body.style.overflow = 'hidden';

      panel.scrollTop = 0;
      content.scrollTop = 0;
    })
    .catch(err => {
      console.error("文章載入失敗：", err);
    });
}
			function openInNewTab() {
  console.log("開啟文章：", currentArticleFile); // ⬅️ Debug 用，可以保留

  if (currentArticleFile) {
    const currentFolder = window.location.pathname.replace(/\/[^\/]*$/, "/");
	  const url = window.location.origin + currentFolder + currentArticleFile;
    const win = window.open(url, '_blank');
    if (!win) {
      alert("瀏覽器封鎖了彈出視窗，請允許本站開啟新分頁！");
    }
  } else {
    alert("目前沒有載入任何文章！");
  }
}


	</script>

	<!--passwordjs-->
	<script src="validate.js"></script>
<script>
  function navigateTo(page, event) {
    if (event) event.preventDefault();

    const cleanUrl = '/' + page.replace(/\.html$/, '').replace(/^\/+/, '');
    const htmlPath = page.replace(/^\/+/, '');

    history.pushState({}, "", cleanUrl);

    fetch(htmlPath)
      .then(res => {
        if (!res.ok) throw new Error("Page not found: " + htmlPath);
        return res.text();
      })
      .then(html => {
        document.getElementById("content-container").innerHTML = html;
      })
      .catch(err => {
        console.error("載入失敗", htmlPath);
        document.getElementById("content-container").innerHTML = "<h2>頁面載入失敗</h2>";
      });
  }

  function getHtmlPathFromUrl(urlPath) {
    const trimmed = urlPath.replace(/^\/+/, '').replace(/\/$/, '');
    return trimmed === '' ? 'iframe.html' : trimmed + '.html';
  }

  window.addEventListener("DOMContentLoaded", () => {
    const page = getHtmlPathFromUrl(location.pathname);
    navigateTo(page);
  });

  window.addEventListener("popstate", () => {
    const page = getHtmlPathFromUrl(location.pathname);

    fetch(page)
      .then(res => {
        if (!res.ok) throw new Error("Page not found: " + page);
        return res.text();
      })
      .then(html => {
        document.getElementById("content-container").innerHTML = html;
      })
      .catch(err => {
        console.error("載入失敗", page);
        document.getElementById("content-container").innerHTML = "<h2>頁面載入失敗</h2>";
      });
  });
</script>

	<script>
    fetch("../navbar.html")
      .then(res => res.text())
      .then(html => {
        document.getElementById("navbar-container").innerHTML = html;
      });
  </script>
</body>
</html>
